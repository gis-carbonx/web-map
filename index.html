<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Web Map - Eligible Area & Land Cover</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    #map { height: 100vh; }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    var map = L.map('map').setView([0, 115], 5);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    function loadAndCombine(urls, style, groupName) {
      var group = L.layerGroup();
      urls.forEach(url => {
        fetch(url)
          .then(res => res.json())
          .then(data => {
            L.geoJSON(data, { style: style }).addTo(group);
          });
      });
      return group;
    }

    var styleEligible = { color: "green", weight: 2, fillOpacity: 0.2 };
    var styleLC23 = { color: "blue", weight: 2, fillOpacity: 0.2 };
    var styleLC13 = { color: "orange", weight: 2, fillOpacity: 0.2 };
    var styleVillage = { color: "red", weight: 1, fillOpacity: 0 };

    var eligibleLayer = loadAndCombine([
      "data/Eligible_B1.geojson",
      "data/Eligible_B2.geojson"
    ], styleEligible, "Eligible Area");

    var lc23Layer = loadAndCombine([
      "data/LC23_B1.geojson",
      "data/LC23_B2.geojson"
    ], styleLC23, "Land Cover 2023");

    var lc13Layer = loadAndCombine([
      "data/LC13_B1.geojson",
      "data/LC13_B2.geojson"
    ], styleLC13, "Land Cover 2013");

    var villageLayer = loadAndCombine([
      "data/VillageBoundaries.geojson"
    ], styleVillage, "Village Boundaries");

    var overlays = {
      "Eligible Area": eligibleLayer,
      "Land Cover 2023": lc23Layer,
      "Land Cover 2013": lc13Layer,
      "Village Boundaries": villageLayer
    };
    L.control.layers(null, overlays).addTo(map);

    eligibleLayer.addTo(map);
    villageLayer.addTo(map);
  </script>
</body>
</html>
