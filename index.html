<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Interactive Web Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    #map {
      height: 100vh;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <script>
    var map = L.map('map').setView([-2.5, 118], 5);

    var baseMap = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: 'Â© OpenStreetMap'
    }).addTo(map);

    var lulc2023 = "https://drive.google.com/uc?export=download&id=1A-gtstSzRic0kevjLGWn48xJPfGpnPpD";
    var lulc2013 = "https://drive.google.com/uc?export=download&id=1H6yXqBC4Oh_Q_ESNc25-9QdD6iAzxXOS";
    var eligibleArea = "https://drive.google.com/uc?export=download&id=1zuDFcKogPHDfByHpsGp75ULx0W-2k8eJ";

    var cmi = "https://raw.githubusercontent.com/gis-carbonx/web-map/main/data/CMI.json";
    var village = "https://raw.githubusercontent.com/gis-carbonx/web-map/main/data/VillageBoundaries.geojson";

    function styleLayer(color) {
      return {
        color: color,
        weight: 2,
        fillOpacity: 0.3
      };
    }

    var overlayLayers = {};

    fetch(lulc2023).then(r => r.json()).then(data => {
      overlayLayers["LULC 2023"] = L.geoJSON(data, {style: styleLayer("green")});
      overlayLayers["LULC 2023"].addTo(map);
      layerControl.addOverlay(overlayLayers["LULC 2023"], "LULC 2023");
    });

    fetch(lulc2013).then(r => r.json()).then(data => {
      overlayLayers["LULC 2013"] = L.geoJSON(data, {style: styleLayer("orange")});
      layerControl.addOverlay(overlayLayers["LULC 2013"], "LULC 2013");
    });

    fetch(eligibleArea).then(r => r.json()).then(data => {
      overlayLayers["Eligible Area"] = L.geoJSON(data, {style: styleLayer("blue")});
      layerControl.addOverlay(overlayLayers["Eligible Area"], "Eligible Area");
    });

    fetch(cmi).then(r => r.json()).then(data => {
      overlayLayers["CMI"] = L.geoJSON(data, {style: styleLayer("purple")});
      layerControl.addOverlay(overlayLayers["CMI"], "CMI");
    });

    fetch(village).then(r => r.json()).then(data => {
      overlayLayers["Village Boundaries"] = L.geoJSON(data, {style: styleLayer("brown")});
      layerControl.addOverlay(overlayLayers["Village Boundaries"], "Village Boundaries");
    });

    var layerControl = L.control.layers({"OpenStreetMap": baseMap}, overlayLayers).addTo(map);
  </script>
</body>
</html>
